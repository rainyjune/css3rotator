!function(a){if("function"==typeof define&&(define.amd||define.cmd))define(function(b,c,d){var e=b("zepto"),f=b("touch");return a(e,f)});else{var b="undefined"!=typeof Zepto?Zepto:jQuery,c=window.TouchObject;window.Css3Rotator=a(b,c)}}(function(a,b){function c(c,h){function i(){j()&&k()&&z()}function j(){if(ia=c.find(ca.container),0===ia.size())throw new Error('The container "'+ca.container+'" does not exist.');if(m(),ja=ia.children(),ea=ja.length,0===ea)throw new Error("There are no slides in the container.");return ca.loop&&(o(),ha=1),P(),!0}function k(){c.addClass("rotatorRootElement"),S(),ia.addClass("rotatorWrapper").addClass("flex-it"),ga=ia.children().size();var a=ga+"00%",b=ga+"00%";return ca.slideWidth!==c.width()&&(a=ca.slideWidth*ga),ca.slideHeight!==c.height()&&(b=ca.slideHeight*ga),"horizontal"===ca.slideMode?ia.addClass("flex-row").width(a):ia.addClass("flex-col").height(b).width("100%"),Y=ia.children().eq(0).width(),Z=ia.children().eq(0).height(),ca.loop&&("horizontal"===ca.slideMode?(v(-ca.slideWidth+"px"),aa=-ca.slideWidth):(w(-ca.slideHeight+"px"),ba=-ca.slideHeight)),!0}function l(){ca.autoPlay&&(la=setTimeout(t,ca.transitonInterval))}function m(){var b=ca.dataSource;if(b&&a.isArray(b)){var c=[];a.each(b,function(a,b){c.push(n(b))}),ia.append(c.join(""))}}function n(b){var c=a("<div>").css("background-image","url("+b.img+")"),d=a("<a>").attr({href:"javascript:void(0);","data-href":b.link}),e=a("<h2>").text(b.title);return c.append(d.append(e)).prop("outerHTML")}function o(){var a=ia.children(),b=a.eq(0),c=a.eq(-1);ia.prepend(c.clone()),ia.append(b.clone())}function p(){r(!1)}function q(){r(!0)}function r(a){u(a),s()}function s(){"horizontal"===ca.slideMode?v():w(),U.dispatchEvent("pageselected",[fa+1])}function t(){if(ca.autoPlay){if($)return window.clearTimeout(la),!1;if(ha===ga-1){if(!ca.loop)return $=!0,window.clearTimeout(la),!1;N(),ha=1,v(),setTimeout(function(){O(),q()},0)}else 0===ha?(N(),ca.loop&&(ha=ga-2,v()),setTimeout(function(){O(),q()},0)):q()}}function u(a){a?(ha++,fa===ea-1?fa=0:fa++):(ha--,0===fa?fa=ea-1:fa--)}function v(a){a||(a=Y*ha,aa=-a,a=aa+"px"),x(a,0)}function w(a){a||(a=Z*ha,ba=-a,a=ba+"px"),x(0,a)}function x(a,b){var c=X+a+", "+b+translateValuePostfix;ia.css({"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,transform:c})}function y(){return Q(),l(),U.dispatchEvent("pagecompleted",[fa+1]),!1}function z(){document.addEventListener("touchmove",A,!1),_=new b(c[0]),a(window).on("resize",L),ia.on(da,y),a(c).on("tap",H),ea>=2&&(a(c).on("swipe",O),a(c).on("swipeUp",B),a(c).on("swipeDown",C),a(c).on("swipeLeft",D),a(c).on("swipeRight",E),a(c).on("swipeStart",I),a(c).on("swipeCancel",K),a(c).on("swipeProgress",J)),setTimeout(function(){M(),l()},0)}function A(a){a.preventDefault()}function B(){"horizontal"===ca.slideMode?K():G()}function C(){"horizontal"===ca.slideMode?K():F()}function D(){"horizontal"===ca.slideMode?G():K()}function E(){"horizontal"===ca.slideMode?F():K()}function F(){ca.loop||0!==ha?p():K()}function G(){ca.loop||ha!==ga-1?q():K()}function H(b){return b.detail&&b.detail.target&&(window.location=a(b.detail.target).attr("data-href")),!1}function I(a){if(window.clearTimeout(la),"horizontal"===ca.slideMode){var b=f(ia[0]);aa=b}else{var c=g(ia[0]);ba=c}if(N(),"horizontal"===ca.slideMode?v(b+"px"):w(c+"px"),!ca.loop)return!1;if(ha===ga-1)if(ha=1,"horizontal"===ca.slideMode){var d=2*-ca.slideWidth+(ia.width()+b);aa=d,v(d+"px")}else{var d=2*-ca.slideHeight+(ia.height()+c);ba=d,w(d+"px")}else if(0===ha)if(ha=ga-2,"horizontal"===ca.slideMode){var d=-ca.slideWidth*ha+b;aa=d,v(d+"px")}else{var d=-ca.slideHeight*ha+c;ba=d,w(d+"px")}}function J(a){var b=a.detail.detail.movedPageX,c=a.detail.detail.movedPageY;"horizontal"===ca.slideMode?v(aa+b+"px"):w(ba+c+"px")}function K(){O(),"horizontal"===ca.slideMode?v():w()}function L(){return window.clearTimeout(la),N(),setTimeout(function(){c.css("height",""),S(),"horizontal"===ca.slideMode?(Y=ia.children().eq(0).width(),v()):(Z=ia.children().eq(0).height(),w()),Q(),setTimeout(function(){O(),l()},0)},500),!1}function M(){ia.css({"-webkit-transition-duration":ca.transitionDuration,"-moz-transition-duration":ca.transitionDuration,"-o-transition-duration":ca.transitionDuration,"transition-duration":ca.transitionDuration})}function N(){ia.addClass("duration-initial")}function O(){ia.removeClass("duration-initial")}function P(){for(var a="<strong class='"+ca.indicatorClass+"'>",b=0;ea>b;b++)a+="<span></span>";a+="</strong>",c.append(a),ka=c.find("."+ca.indicatorClass).children(),ka.eq(0).addClass(ca.indicatorActiveItemClass)}function Q(){ka.removeClass(ca.indicatorActiveItemClass),ka.eq(fa).addClass(ca.indicatorActiveItemClass)}function R(a){return"fullscreen"===a?c.height()||window.innerHeight:c.width()/a}function S(){c.height(R(ca.aspectRatio))}function T(a){return ca.loop?a+1:a}c="string"==typeof c?a(c):c;var U=this,V={container:".rotatorWrapper",transitionDuration:"5s",slideWidth:c.width(),slideHeight:c.height(),slideMode:"horizontal",aspectRatio:2,transitonInterval:"2000",pauseAfterTransition:!0,indicatorClass:"indicator",indicatorActiveItemClass:"current",loop:!1,autoPlay:!0},W=e(),X=W?"translate3d(":"translate(";translateValuePostfix=W?", 0)":")";var Y,Z,$,_,aa=null,ba=null,ca=a.extend(V,h),da=d(),ea=0,fa=0,ga=0,ha=0,ia=null,ja=null,ka=null,la=null;i(),this.previous=function(){return 0===fa?!1:(p(),!0)},this.next=function(){return fa===ea-1?!1:(q(),!0)},Object.defineProperty(this,"dispose",{value:function(){document.removeEventListener("touchmove",A,!1),a(window).off("resize",L),ia.off(da,y),a(c).off("tap",H),a(c).off("swipe",O),a(c).off("swipeUp",B),a(c).off("swipeDown",C),a(c).off("swipeLeft",D),a(c).off("swipeRight",E),a(c).off("swipeStart",I),a(c).off("swipeCancel",K),a(c).off("swipeProgress",J),_.dispose()}}),Object.defineProperty(this,"element",{value:c}),Object.defineProperty(this,"currentPage",{get:function(){return fa+1},set:function(a){0>=a||a>ea||(fa=a-1,ha=T(fa),s())}}),this.count=function(){return ea}}function d(){var a,b,c=document.createElement("div"),d={WebkitTransition:"webkitTransitionEnd",transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend"};for(a in d)if(d.hasOwnProperty(a)&&c.style[a]!==b)return d[a];return""}function e(){var a,b=document.createElement("p"),c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var d in c)void 0!==b.style[d]&&(b.style[d]="translate3d(1px,1px,1px)",a=window.getComputedStyle(b).getPropertyValue(c[d]));return document.body.removeChild(b),void 0!==a&&a.length>0&&"none"!==a}function f(a){var b=h(a);return b.m41}function g(a){var b=h(a);return b.m42}function h(a){var b=null;"undefined"!=typeof WebKitCSSMatrix?b=WebKitCSSMatrix:"undefined"!=typeof MSCSSMatrix?b=MSCSSMatrix:"undefined"!=typeof DOMMatrix&&(b=DOMMatrix);var c=window.getComputedStyle(a),d="";return"undefined"!=typeof c.webkitTransform?d=c.webkitTransform:"undefined"!=typeof c.mozTransform?d=c.mozTransform:"undefined"!=typeof c.msTransform?d=c.msTransform:"undefined"!=typeof c.transform&&(d=c.transform),new b(d)}return c.prototype.addEventListener=function(a,b){this.element.on(a,b)},c.prototype.removeEventListener=function(a,b){this.element.off(a,b)},c.prototype.dispatchEvent=function(a,b){this.element.trigger(a,b)},a.fn.css3Rotator=function(b){return this.each(function(d,e){new c(a(e),b)})},c});